

<html>

  <head></head>

  <body>
      <script id="can_spread_its_DNA_into_DB">


        // In the following line, you should include the prefixes of implementations you want to test.
        window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;

        // DON'T use "var indexedDB = ..." if you're not in a function.
        // Moreover, you may need references to some window.IDB* objects:
        window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.msIDBTransaction || {READ_WRITE: "readwrite"};// This line should only be needed if it is needed to support the object's constants for older browsers

        window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;
// (Mozilla has never prefixed these objects, so we don't need window.mozIDB*)


<!---------------------------- STREAM ENTRY -------------------------------->

        if (!window.indexedDB)
        {
          console.log("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.");
        }

        var db;
        var request = window.indexedDB.open("null");

        request.onerror = function(event) {
          console.log("Why didn't you allow my web app to use IndexedDB?!");
        };

        request.onsuccess = function(event) {
          db = event.target.result;
          var objectStore = db.createObjectStore("null", { keyPath: "$id" });
        };

        var doc1 = {
          "$id": "null",
          "subject_id": null,
          "creator_id": null,
          "payload": null,
          "t": 0
        }

        function generateUUID()
        {
          const array = new Uint16Array(16);
          const idBuffer = window.crypto.getRandomValues(array);
          const str = Array.prototype.map.call(new Uint8Array(idBuffer), x => ('00' + x.toString(16)).slice(-2)).join('');

          return str;
        }
/*
        function buf2hex(buffer) { // buffer is an ArrayBuffer
          return Array.prototype.map.call(new Uint8Array(buffer), x => ('00' + x.toString(16)).slice(-2)).join('');
        }
*/

        
        var newIdString1 = generateUUID();
        var newIdString2 = generateUUID();

        console.log(newIdString1 + " - " + newIdString2);

        var doc2 = {
          "$id": newIdString2,
          "subject_id": null,
          "creator_id": null,
          "payload": null,
          "t": 1
        };

        newIdString1 = generateUUID();

        var doc = {
          "$id": newIdString1,
          "subject_id": newIdString2,
          "creator_id": newIdString2,
          "payload": null,
          "t":2
        };

        newIdString1 = generateUUID();

        var doc = {
          "$id": newIdString1,
          "subject_id": newIdString1,
          "creator_id": newIdString2,
          "payload": null,
          "t": 3
        };

        var request = window.indexedDB.open("stream_entry");

        request.onerror = function(event) {
          console.log("Why didn't you allow my web app to use IndexedDB?!");
        };

        request.onsuccess = function(event) {
          db = event.target.result;
        };







//https://youtu.be/_NSn5RfxoXs





        alert("\nCAN:\nSPREAD ITS DNA\nINTO\nINDEXEDDB.\n\nMIGHT WANNA GET IT CHECKED...\n\nJUST SAYIN...\n\n");
      </script>

      <script id="can_spread_its_DNA_into_DB">
      </script>
  </body>
  </html>

    